import{a as tt,b as I,c as et,d as S,e as ot,h as nt,i as it,j as rt,k as st,m as at,n as lt,o as pt}from"./chunk-QIXVZS7E.js";import{C as u,D as w,G as C,H as j,L as W,M as H,N as m,O as i,P as r,Q as f,R as z,S as c,T as g,V as a,W as y,X as q,Y as J,Z as K,_ as Q,a as b,aa as V,b as G,ba as A,ha as O,ia as X,ja as Y,k as $,l as M,ma as Z,o as p,p as h,q as P,r as L,s as R,sa as v,u as U,z as l}from"./chunk-SLPFIVQR.js";var d=class o{http=p(Z);url="http://localhost:3000/posts";posts=U([]);constructor(){this.loadPosts()}loadPosts(){return this.http.get(this.url).subscribe(e=>{this.posts.set(e)})}addPost(e){return this.http.post(this.url,e).subscribe(t=>{this.posts.update(n=>[...n,t]),this.setPost(JSON.stringify(this.posts()))})}deletePost(e){if(confirm("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u0443 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044E?"))return this.http.delete(`${this.url}/${e}`).subscribe(()=>{this.posts.update(n=>n.filter(s=>s.id!==e))})}updatePost(e){return this.http.put(`${this.url}/${e.id}`,e).subscribe(()=>{this.posts.update(t=>t.map(n=>n.id===e.id?b(b({},n),e):n))})}setPost(e){localStorage.setItem("posts",e)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=$({token:o,factory:o.\u0275fac,providedIn:"root"})};function mt(o,e){o&1&&(i(0,"p",6)(1,"small"),a(2,"\u041F\u043E\u043B\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),r()())}var k=class o{createPostForm;postService=p(d);fb=p(at);ngOnInit(){this.createPostForm=this.fb.group({text:["",et.required]})}submitPost(){this.postService.addPost(this.createPostForm.value),this.createPostForm.reset()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-create-post"]],standalone:!1,decls:8,vars:3,consts:[[1,"create"],[1,"title"],[3,"ngSubmit","formGroup"],["formControlName","text","placeholder","\u0427\u0442\u043E \u0443 \u0412\u0430\u0441 \u043D\u043E\u0432\u043E\u0433\u043E?"],["class","error-text",4,"ngIf"],["type","submit",3,"disabled"],[1,"error-text"]],template:function(t,n){if(t&1&&(i(0,"div",0)(1,"h2",1),a(2,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044E"),r(),i(3,"form",2),c("ngSubmit",function(){return n.submitPost()}),f(4,"textarea",3),C(5,mt,3,0,"p",4),i(6,"button",5),a(7,"\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C"),r()()()),t&2){let s;l(3),m("formGroup",n.createPostForm),l(2),m("ngIf",((s=n.createPostForm.get("text"))==null?null:s.invalid)&&((s=n.createPostForm.get("text"))==null?null:s.touched)),l(),m("disabled",n.createPostForm.invalid)}},dependencies:[O,it,I,S,ot,rt,st],styles:[".create[_ngcontent-%COMP%]{width:100%;padding:5px;display:flex;flex-direction:column;gap:15px;margin:0 auto;border-radius:6px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.title[_ngcontent-%COMP%]{font-size:20px}textarea[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:12px 16px;border-radius:6px;width:100%;min-height:120px;resize:vertical;line-height:1.5;background-color:var(--color-white);color:var(--color-dark-blue);transition:border-color .3s ease,box-shadow .3s ease}textarea[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue);box-shadow:0 0 0 3px #007bff26}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:20px;line-height:48px;padding:0 20px;background-color:var(--color-green);width:100%}button[_ngcontent-%COMP%]:hover{background-color:#069348}.error-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-top:-5px;color:var(--color-red)}"]})};var F=class o{postService=p(d);closeBtn=new j;update=new j;post=this.post;editedText="";onClose(){this.closeBtn.emit()}onUpdate(){let e=G(b({},this.post),{text:this.editedText,updatedAt:new Date().toISOString()});this.update.emit(e),this.onClose()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-modal-post"]],inputs:{post:"post"},outputs:{closeBtn:"closeBtn",update:"update"},standalone:!1,decls:14,vars:1,consts:[[1,"modal","active"],[1,"modal__box"],[1,"modal-close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"svg-castom"],["x1","18","y1","6","x2","6","y2","18","stroke","black","stroke-width","2","stroke-linecap","round"],["x1","6","y1","6","x2","18","y2","18","stroke","black","stroke-width","2","stroke-linecap","round"],["placeholder","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u0441\u0442\u0430...",3,"ngModelChange","ngModel"],[1,"buttons"],[1,"save",3,"click"],["type","button",1,"cancel",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),c("click",function(){return n.onClose()}),L(),i(3,"svg",3),f(4,"line",4)(5,"line",5),r()(),R(),i(6,"h2"),a(7,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u0438:"),r(),i(8,"textarea",6),Q("ngModelChange",function(x){return K(n.editedText,x)||(n.editedText=x),x}),r(),i(9,"div",7)(10,"button",8),c("click",function(){return n.onUpdate()}),a(11,"\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C"),r(),i(12,"button",9),c("click",function(){return n.onClose()}),a(13,"\u041E\u0442\u043C\u0435\u043D\u0430"),r()()()()),t&2&&(l(8),J("ngModel",n.editedText))},dependencies:[I,S,nt],styles:[".modal[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100vh;z-index:99998;background-color:#0000004d;display:grid;align-items:center;justify-content:center;overflow-y:auto;visibility:hidden;opacity:0;transition:opacity .4s,visibility .4s}.modal__box[_ngcontent-%COMP%]{position:relative;max-width:500px;z-index:1;background-color:var(--color-white);margin:30px 15px;box-shadow:0 0 17px -7px #223c5033;transform:scale(0);transition:transform .8s;border-radius:6px;padding:40px 30px;display:flex;flex-direction:column;gap:20px}.modal-close-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;border:none;background-color:transparent;padding:5px;cursor:pointer}.modal.active[_ngcontent-%COMP%]{visibility:visible;opacity:1}.modal.active[_ngcontent-%COMP%]   .modal__box[_ngcontent-%COMP%]{transform:scale(1)}textarea[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:12px 16px;border-radius:6px;width:100%;min-height:120px;resize:vertical;line-height:1.5;background-color:var(--color-white);color:var(--color-dark-blue);transition:border-color .3s ease,box-shadow .3s ease}textarea[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue);box-shadow:0 0 0 3px #007bff26}.buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:20px}.buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:16px;line-height:42px;padding:0 14px}.cancel[_ngcontent-%COMP%]{background-color:var(--color-blue)}.cancel[_ngcontent-%COMP%]:hover{background-color:#3453eb}.save[_ngcontent-%COMP%]{background-color:var(--color-green)}.save[_ngcontent-%COMP%]:hover{background-color:#069348}@media (max-width: 768px){.buttons[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{font-size:14px}}"]})};var xt=(o,e)=>e.id;function _t(o,e){if(o&1&&(i(0,"small",7),a(1," (\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u043E: "),i(2,"span"),a(3),V(4,"date"),r()()),o&2){let t=g().$implicit;l(3),q("",A(4,1,t.updatedAt,"short"),")")}}function bt(o,e){if(o&1){let t=z();i(0,"app-modal-post",8),c("closeBtn",function(){h(t);let s=g(2);return P(s.closeModal())})("update",function(s){h(t);let x=g(2);return P(x.updatePost(s))}),r()}if(o&2){let t=g().$implicit;m("post",t)}}function ht(o,e){if(o&1){let t=z();i(0,"p",1),a(1," \u0410\u0432\u0442\u043E\u0440: "),i(2,"span"),a(3),r()(),i(4,"p",1),a(5," \u0414\u0430\u0442\u0430 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u0438: "),i(6,"span"),a(7),V(8,"date"),r(),C(9,_t,5,4,"small",2),r(),i(10,"p",1),a(11," \u041F\u043E\u0441\u0442: "),i(12,"span"),a(13),r()(),i(14,"div",3)(15,"button",4),c("click",function(){h(t);let s=g();return P(s.openModal())}),a(16,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),r(),i(17,"button",5),c("click",function(){let s=h(t).$implicit,x=g();return P(x.deletePost(s.id))}),a(18,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),r(),C(19,bt,1,1,"app-modal-post",6),r()}if(o&2){let t=e.$implicit,n=g();l(3),y(t.author),l(4),y(A(8,5,t.date,"short")),l(2),m("ngIf",t.updatedAt),l(4),y(t.text),l(6),m("ngIf",n.isEditModalOpen)}}var D=class o{postService=p(d);userService=p(tt);deletePost(e){this.postService.deletePost(e)}updatePost(e){this.postService.updatePost(e)}isEditModalOpen=!1;openModal(){this.isEditModalOpen=!0}closeModal(){this.isEditModalOpen=!1}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-post"]],standalone:!1,decls:3,vars:0,consts:[[1,"post"],[1,"title"],["class","edited",4,"ngIf"],[1,"buttons"],[1,"update",3,"click"],["type","submit",1,"delete",3,"click"],[3,"post","closeBtn","update",4,"ngIf"],[1,"edited"],[3,"closeBtn","update","post"]],template:function(t,n){t&1&&(i(0,"div",0),W(1,ht,20,8,null,null,xt),r()),t&2&&(l(),H(n.postService.posts()))},dependencies:[O,F,X],styles:[".post[_ngcontent-%COMP%]{width:100%;padding:5px 5px 10px;display:flex;flex-direction:column;gap:7px;margin:0 auto;border-radius:6px;border-bottom:1px solid var(--color-gray)}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.buttons[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:space-between;align-items:center;gap:20px}.buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:16px;line-height:42px;padding:0 14px}.update[_ngcontent-%COMP%]{background-color:var(--color-blue)}.update[_ngcontent-%COMP%]:hover{background-color:#3453eb}.delete[_ngcontent-%COMP%]{background-color:var(--color-red)}.delete[_ngcontent-%COMP%]:hover{background-color:#e44242}@media (max-width: 768px){.buttons[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{font-size:14px}}.edited[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-left:5px}"]})};var N=class o{postService=p(d);static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-post-list"]],standalone:!1,decls:2,vars:0,consts:[[1,"post-list"]],template:function(t,n){t&1&&(i(0,"div",0),f(1,"app-post"),r())},dependencies:[D],styles:[".post-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};var T=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-dashboard"]],standalone:!1,decls:5,vars:0,consts:[[1,"dashboard-container"],[1,"container"],[1,"dashboard-inner"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),f(3,"app-create-post")(4,"app-post-list"),r()()())},dependencies:[k,N],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-inner[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:flex-start;gap:15px}.dashboard-inner[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}@media (max-width: 768px){.dashboard-inner[_ngcontent-%COMP%]{flex-direction:column}.dashboard-inner[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}}"]})};var vt=[{path:"",component:T}],B=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=M({imports:[v.forChild(vt),v]})};var ut=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=M({imports:[Y,v,B,lt,pt]})};export{B as a,ut as b};
