import{b as Q}from"./chunk-GNZUPDYF.js";import{a as V,b as R,c as M,d as G,e as A,i as L,j as q,k as H,m as J,n as K}from"./chunk-QIXVZS7E.js";import{C as h,D as b,G as m,H as S,J as N,K as T,N as p,O as o,P as r,Q as c,R as z,S as d,T as f,V as u,W as v,a as I,b as D,ha as C,ja as j,l as _,o as x,p as O,q as E,r as B,s as F,sa as g,y as U,z as s}from"./chunk-SLPFIVQR.js";function Z(t,l){t&1&&(o(0,"p",15),u(1," \u041F\u043E\u043B\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C "),r())}function $(t,l){t&1&&(o(0,"p",15),u(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u044D\u043B. \u0430\u0434\u0440\u0435\u0441 "),r())}var P=class t{formUpdating;fb=x(J);selectedPhoto=null;user;closeBtn=new S;update=new S;ngOnInit(){this.formUpdating=this.fb.group({name:["",[M.required]],about:[""],email:["",[M.required,M.email]],photo:[""]})}onClose(){this.closeBtn.emit()}onUpdate(){if(this.formUpdating.invalid)return;let l=D(I({},this.formUpdating.value),{photo:this.selectedPhoto});this.update.emit(l)}onFileSelected(l){let e=l.target;if(!e.files||e.files.length===0)return;let n=e.files[0],i=new FileReader;i.onload=()=>{this.selectedPhoto=i.result},i.readAsDataURL(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-modal-profile"]],inputs:{user:"user"},outputs:{closeBtn:"closeBtn",update:"update"},standalone:!1,decls:20,vars:4,consts:[[1,"modal","active"],[1,"modal__box"],[1,"modal-close-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",1,"svg-castom"],["x1","18","y1","6","x2","6","y2","18","stroke","black","stroke-width","2","stroke-linecap","round"],["x1","6","y1","6","x2","18","y2","18","stroke","black","stroke-width","2","stroke-linecap","round"],[3,"ngSubmit","formGroup"],["formControlName","name","type","text","placeholder","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0424\u0418\u041E"],["class","error-text",4,"ngIf"],["formControlName","email","type","email","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u044D\u043B. \u0430\u0434\u0440\u0435\u0441\u0441"],["formControlName","about","name","text","placeholder","\u0420\u0430\u0441\u0441\u043A\u0430\u0436\u0438\u0442\u0435 \u043E \u0441\u0435\u0431\u0435"],["type","file",3,"change"],[1,"buttons"],["type","submit",1,"save",3,"disabled"],["type","button",1,"cancel",3,"click"],[1,"error-text"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),d("click",function(){return n.onClose()}),B(),o(3,"svg",3),c(4,"line",4)(5,"line",5),r()(),F(),o(6,"h2"),u(7,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:"),r(),o(8,"form",6),d("ngSubmit",function(){return n.onUpdate()}),c(9,"input",7),m(10,Z,2,0,"p",8),c(11,"input",9),m(12,$,2,0,"p",8),c(13,"textarea",10),o(14,"input",11),d("change",function(a){return n.onFileSelected(a)}),r(),o(15,"div",12)(16,"button",13),u(17,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),r(),o(18,"button",14),d("click",function(a){return a.preventDefault(),n.onClose()}),u(19," \u041E\u0442\u043C\u0435\u043D\u0430 "),r()()()()()),e&2){let i,a;s(8),p("formGroup",n.formUpdating),s(2),p("ngIf",((i=n.formUpdating.get("name"))==null?null:i.invalid)&&((i=n.formUpdating.get("name"))==null?null:i.touched)),s(2),p("ngIf",((a=n.formUpdating.get("email"))==null?null:a.invalid)&&((a=n.formUpdating.get("email"))==null?null:a.touched)),s(4),p("disabled",n.formUpdating.invalid)}},dependencies:[C,L,R,G,A,q,H],styles:[".modal[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:100%;height:100vh;z-index:99998;background-color:#0000004d;display:grid;align-items:center;justify-content:center;overflow-y:auto;visibility:hidden;opacity:0;transition:opacity .4s,visibility .4s}.modal__box[_ngcontent-%COMP%]{position:relative;max-width:500px;z-index:1;background-color:var(--color-white);margin:30px 15px;box-shadow:0 0 17px -7px #223c5033;transform:scale(0);transition:transform .8s;border-radius:6px;padding:40px 30px;display:flex;flex-direction:column;gap:20px}.modal-close-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;border:none;background-color:transparent;padding:5px;cursor:pointer}.modal.active[_ngcontent-%COMP%]{visibility:visible;opacity:1}.modal.active[_ngcontent-%COMP%]   .modal__box[_ngcontent-%COMP%]{transform:scale(1)}form[_ngcontent-%COMP%]{width:100%;z-index:1;background-color:var(--color-white);display:flex;flex-direction:column;gap:20px}input[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:14px 16px;border-radius:6px;width:100%}input[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue)}textarea[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:12px 16px;border-radius:6px;width:100%;min-height:120px;resize:vertical;line-height:1.5;background-color:var(--color-white);color:var(--color-dark-blue);transition:border-color .3s ease,box-shadow .3s ease}textarea[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue);box-shadow:0 0 0 3px #007bff26}.buttons[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:space-between;align-items:center;gap:20px}.buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:50%}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:16px;line-height:42px;padding:0 14px}.cancel[_ngcontent-%COMP%]{background-color:var(--color-blue)}.cancel[_ngcontent-%COMP%]:hover{background-color:#3453eb}.save[_ngcontent-%COMP%]{background-color:var(--color-green)}.save[_ngcontent-%COMP%]:hover{background-color:#069348}@media (max-width: 768px){.buttons[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{font-size:14px}}.error-text[_ngcontent-%COMP%]{color:var(--color-red);font-size:14px;font-weight:600;margin-top:-15px}"]})};function te(t,l){if(t&1&&c(0,"img",4),t&2){let e=f();p("src",e.user==null?null:e.user.photo,U)}}function ne(t,l){t&1&&c(0,"img",5)}function ie(t,l){if(t&1&&(o(0,"p",7),u(1," \u041E \u0441\u0435\u0431\u0435: "),o(2,"span"),u(3),r()()),t&2){let e,n=f();s(3),v((e=n.userService.user())==null?null:e.about)}}function oe(t,l){if(t&1){let e=z();o(0,"app-modal-profile",11),d("closeBtn",function(){O(e);let i=f();return E(i.closeModal())})("update",function(i){O(e);let a=f();return E(a.updateProfile(i))}),r()}if(t&2){let e=f();p("user",e.user)}}var y=class t{userService=x(V);isEditModalOpen=!1;user;ngOnInit(){this.user=this.userService.user()}updateProfile(l){this.userService.updateProfile(l).subscribe({next:e=>{this.user=e,alert("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430"),this.isEditModalOpen=!1},error:e=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u043F\u0440\u043E\u0444\u0438\u043B\u044F:",e)}})}openModal(){this.isEditModalOpen=!0}closeModal(){this.isEditModalOpen=!1}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-profile"]],standalone:!1,decls:21,vars:5,consts:[[1,"profile__container"],[1,"container"],[1,"profile__inner"],[1,"profile"],["accept","image/*","alt","\u0424\u043E\u0442\u043E \u0434\u043B\u044F \u0430\u0432\u0430\u0442\u0430\u0440\u0430","width","150","height","150",1,"image",3,"src"],["src","assets/images/user.png","alt","\u0424\u043E\u0442\u043E \u0434\u043B\u044F \u0430\u0432\u0430\u0442\u0430\u0440\u0430","width","150","height","150",1,"image"],[1,"profile__info"],[1,"title"],["class","title",4,"ngIf"],[3,"click"],[3,"user","closeBtn","update",4,"ngIf"],[3,"closeBtn","update","user"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),N(4,te,1,1,"img",4)(5,ne,1,0,"img",5),o(6,"div",6)(7,"h2",7),u(8," \u0424\u0418\u041E: "),o(9,"span"),u(10),r(),u(11," \u{1F464} "),r(),o(12,"p",7),u(13," \u041F\u043E\u0447\u0442\u0430: "),o(14,"span"),u(15),r(),u(16," \u{1F4E7} "),r(),m(17,ie,4,1,"p",8),r()(),o(18,"button",9),d("click",function(){return n.openModal()}),u(19,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C"),r(),m(20,oe,1,1,"app-modal-profile",10),r()()()),e&2){let i,a;s(4),T(n.user!=null&&n.user.photo?4:5),s(6),v((i=n.userService.user())==null?null:i.name),s(5),v((a=n.userService.user())==null?null:a.email),s(2),p("ngIf",n.user==null?null:n.user.about),s(3),p("ngIf",n.isEditModalOpen)}},dependencies:[C,P],styles:[".profile__container[_ngcontent-%COMP%]{padding:20px 50px}.profile__inner[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:start;align-items:flex-start;gap:30px}.profile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;gap:25px}.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;text-align:center;line-height:30px}.profile__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.title[_ngcontent-%COMP%]{font-size:20px;font-weight:400}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:28px;font-weight:600}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;transition:background-color .3s;font-size:16px;line-height:42px;padding:0 14px;background-color:var(--color-blue)}button[_ngcontent-%COMP%]:hover{background-color:#3453eb}@media (max-width: 768px){.profile[_ngcontent-%COMP%]{flex-direction:column}}"]})};var re=[{path:"",component:y}],w=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=b({type:t});static \u0275inj=_({imports:[g.forChild(re),g]})};var W=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=b({type:t});static \u0275inj=_({imports:[j,w,Q,g,K]})};export{W as ProfileModule};
