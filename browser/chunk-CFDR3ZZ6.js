import{a as V,b as y,c as p,d as w,e as I,f as q,g as L,i as P,j as M,k as O,m as J,o as H}from"./chunk-AIDCF3JN.js";import{B as c,C as _,D as S,G as g,N as s,O as o,P as n,Q as d,S as F,V as l,e as B,g as T,h as j,ha as k,ja as G,k as A,l as x,ma as z,n as C,qa as v,ra as E,sa as b,z as m}from"./chunk-SLPFIVQR.js";var h=class r{constructor(e,i,t){this.http=e;this.router=i;this.userService=t}url="http://localhost:3000/users";getUser(){return this.http.get(this.url)}login(e){return this.getUser().pipe(B(i=>{let t=i.find(u=>u.email===e.email&&u.fakePassword===e.fakePassword);return t&&(this.setUser(JSON.stringify(t)),this.userService.loginedUser(t)),t||null}))}register(e){let i=Math.random().toString(36).substring(2),t={name:e.name,email:e.email,fakePassword:e.fakePassword,token:i};return this.getUser().pipe(B(u=>{if(u.find(f=>f.email===e.email))throw new Error("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");return t}),T(u=>this.http.post(this.url,u).pipe(j(a=>{this.setUser(JSON.stringify(a)),this.userService.loginedUser(a),a.token&&this.setToken(a.token),this.router.navigate(["/dashboard"])}))))}setToken(e){localStorage.setItem("token",JSON.stringify(e))}setUser(e){localStorage.setItem("user",JSON.stringify(e))}getToken(){return localStorage.getItem("token")||""}isLoggedIn(){return this.getToken()!==null}logout(){localStorage.removeItem("token")}static \u0275fac=function(i){return new(i||r)(C(z),C(v),C(V))};static \u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})};function $(r,e){r&1&&(o(0,"p",7)(1,"small"),l(2,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u044D\u043B. \u0430\u0434\u0440\u0435\u0441"),n()())}function ee(r,e){r&1&&(o(0,"p",7)(1,"small"),l(2,"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0446\u0438\u0444\u0440\u0443, \u043E\u0434\u043D\u0443 \u0441\u0442\u0440\u043E\u0447\u043D\u0443\u044E \u0431\u0443\u043A\u0432\u0443, \u043E\u0434\u043D\u0443 \u0437\u0430\u0433\u043B\u0430\u0432\u043D\u0443\u044E \u0431\u0443\u043A\u0432\u0443"),n()())}var N=class r{constructor(e,i){this.router=e;this.authService=i}loginForm;ngOnInit(){this.loginForm=new q({email:new L("user@mail.com",[p.required,p.email]),fakePassword:new L("123",[p.required])})}submitLogin(){this.loginForm.valid&&this.authService.login(this.loginForm.value).subscribe(e=>{if(e){let i=Math.random().toString(36).substring(2);this.authService.setToken(i),this.router.navigate(["/dashboard"])}else alert("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043B\u043E\u0433\u0438\u043D \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C")})}static \u0275fac=function(i){return new(i||r)(c(v),c(h))};static \u0275cmp=_({type:r,selectors:[["app-login"]],standalone:!1,decls:11,vars:4,consts:[[3,"ngSubmit","formGroup"],[1,"form__item"],["formControlName","email","type","text","placeholder","\u042D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u044B\u0439 \u0430\u0434\u0440\u0435\u0441","name","email"],["class","error-text",4,"ngIf"],["formControlName","fakePassword","type","fakePassword","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C","name","fakePassword"],["type","submit",1,"login",3,"disabled"],["type","button","routerLink","/auth/register",1,"register"],[1,"error-text"]],template:function(i,t){if(i&1&&(o(0,"form",0),F("ngSubmit",function(){return t.submitLogin()}),o(1,"div",1),d(2,"input",2),g(3,$,3,0,"p",3),n(),o(4,"div",1),d(5,"input",4),g(6,ee,3,0,"p",3),n(),o(7,"button",5),l(8,"\u0412\u0445\u043E\u0434"),n(),o(9,"button",6),l(10,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),n()()),i&2){let u,a;s("formGroup",t.loginForm),m(3),s("ngIf",((u=t.loginForm.get("email"))==null?null:u.invalid)&&((u=t.loginForm.get("email"))==null?null:u.touched)),m(3),s("ngIf",((a=t.loginForm.get("fakePassword"))==null?null:a.invalid)&&((a=t.loginForm.get("fakePassword"))==null?null:a.touched)),m(),s("disabled",t.loginForm.invalid)}},dependencies:[k,E,P,y,w,I,M,O],styles:["form[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:5px;padding:40px 30px;display:flex;flex-direction:column;gap:15px;width:300px;margin:0 auto}input[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:14px 16px;border-radius:6px;width:250px}input[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue)}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:20px;line-height:48px;padding:0 20px}.login[_ngcontent-%COMP%]{background-color:var(--color-blue);width:100%}.login[_ngcontent-%COMP%]:hover{background-color:#5d75ef}.register[_ngcontent-%COMP%]{background-color:var(--color-green)}.register[_ngcontent-%COMP%]:hover{background-color:#069348}.error-text[_ngcontent-%COMP%]{color:var(--color-red);font-size:14px;font-weight:600}"]})};function te(r,e){r&1&&(o(0,"p",9)(1,"small"),l(2,"\u041A\u0430\u043A \u0412\u0430\u0441 \u0437\u043E\u0432\u0443\u0442?"),n()())}function re(r,e){r&1&&(o(0,"p",9)(1,"small"),l(2,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u044D\u043B. \u0430\u0434\u0440\u0435\u0441"),n()())}function ie(r,e){r&1&&(o(0,"p",9)(1,"small"),l(2,"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0446\u0438\u0444\u0440\u0443"),n()())}var R=class r{constructor(e,i,t){this.fb=e;this.authService=i;this.router=t}registerForm;ngOnInit(){this.registerForm=this.fb.group({name:["",p.required],email:["",[p.required,p.email]],fakePassword:["",[p.required]]})}submitRegister(){this.registerForm.invalid||this.authService.register(this.registerForm.value).subscribe({next:()=>console.log("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),error:e=>{e.message==="\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"?(alert("\u0422\u0430\u043A\u043E\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D!"),this.router.navigate(["/auth/login"])):alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438")}})}static \u0275fac=function(i){return new(i||r)(c(J),c(h),c(v))};static \u0275cmp=_({type:r,selectors:[["app-register"]],standalone:!1,decls:17,vars:5,consts:[[3,"ngSubmit","formGroup"],[1,"form__item"],["formControlName","name","type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0424\u0418\u041E"],["class","error-text",4,"ngIf"],["formControlName","email","type","email","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u042D\u043B. \u0430\u0434\u0440\u0435\u0441"],["formControlName","fakePassword","type","fakePassword","placeholder","\u041F\u0440\u0438\u0434\u0443\u043C\u0430\u0439\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"],["type","submit",1,"register",3,"disabled"],[1,"text"],["routerLink","/auth/login"],[1,"error-text"]],template:function(i,t){if(i&1&&(o(0,"form",0),F("ngSubmit",function(){return t.submitRegister()}),o(1,"h2"),l(2,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C"),n(),o(3,"div",1),d(4,"input",2),g(5,te,3,0,"p",3),n(),o(6,"div",1),d(7,"input",4),g(8,re,3,0,"p",3),n(),o(9,"div",1),d(10,"input",5),g(11,ie,3,0,"p",3),n(),o(12,"button",6),l(13," \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F "),n(),o(14,"p",7)(15,"a",8),l(16,"\u0423 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C \u0443\u0447\u0451\u0442\u043D\u0430\u044F \u0437\u0430\u043F\u0438\u0441\u044C?"),n()()()),i&2){let u,a,f;s("formGroup",t.registerForm),m(5),s("ngIf",((u=t.registerForm.get("name"))==null?null:u.invalid)&&((u=t.registerForm.get("name"))==null?null:u.touched)),m(3),s("ngIf",((a=t.registerForm.get("email"))==null?null:a.invalid)&&((a=t.registerForm.get("email"))==null?null:a.touched)),m(3),s("ngIf",((f=t.registerForm.get("fakePassword"))==null?null:f.invalid)&&((f=t.registerForm.get("fakePassword"))==null?null:f.touched)),m(),s("disabled",t.registerForm.invalid)}},dependencies:[k,E,P,y,w,I,M,O],styles:["form[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:5px;padding:40px 30px;display:flex;flex-direction:column;gap:15px;width:90%;margin:0 auto}input[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:14px 16px;border-radius:6px;width:100%}input[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue)}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:20px;line-height:48px;padding:0 20px}.register[_ngcontent-%COMP%]{background-color:var(--color-green)}.register[_ngcontent-%COMP%]:hover{background-color:#069348}.text[_ngcontent-%COMP%]{text-align:center;transition:.3s;font-weight:600}.text[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:var(--color-blue)}.error-text[_ngcontent-%COMP%]{color:var(--color-red);font-size:14px;font-weight:600}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:30px 20px}}"]})};var oe=[{path:"login",component:N},{path:"register",component:R}],U=class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=S({type:r});static \u0275inj=x({imports:[b.forChild(oe),b]})};var W=class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=S({type:r});static \u0275inj=x({imports:[G,U,H,b]})};export{h as a,W as b};
