import{a as V,b as w,c as p,d as y,e as I,f as q,g as L,i as P,j as M,k as D,m as H,o as J}from"./chunk-UXZJEVMD.js";import{B as c,C as _,D as F,G as g,N as l,O as o,P as n,Q as d,S,V as a,e as U,g as A,h as T,ha as E,ja as G,k as j,l as x,ma as z,n as C,qa as v,ra as k,sa as b,z as m}from"./chunk-SLPFIVQR.js";var h=class r{constructor(e,u,t){this.http=e;this.router=u;this.userService=t}url="http://localhost:3000/users";getUser(){return this.http.get(this.url)}login(e){return this.getUser().pipe(U(u=>{let t=u.find(i=>i.email===e.email&&i.fakePassword===e.fakePassword);return this.setUser(JSON.stringify(t)),t&&this.userService.loginedUser(t),t||null}))}register(e){let u=Math.random().toString(36).substring(2),t={name:e.name,email:e.email,fakePassword:e.fakePassword,token:u};return this.getUser().pipe(U(i=>{if(i.find(f=>f.email===e.email))throw new Error("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442");return t}),A(i=>this.http.post(this.url,i).pipe(T(()=>{this.setUser(JSON.stringify(t)),this.userService.loginedUser(t),this.setToken(i.token),this.router.navigate(["/dashboard"])}))))}setToken(e){localStorage.setItem("token",e)}setUser(e){localStorage.setItem("user",e)}getToken(){return localStorage.getItem("token")}isLoggedIn(){return this.getToken()!==null}logout(){localStorage.removeItem("token")}static \u0275fac=function(u){return new(u||r)(C(z),C(v),C(V))};static \u0275prov=j({token:r,factory:r.\u0275fac,providedIn:"root"})};function $(r,e){r&1&&(o(0,"p",7)(1,"small"),a(2,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u044D\u043B. \u0430\u0434\u0440\u0435\u0441"),n()())}function ee(r,e){r&1&&(o(0,"p",7)(1,"small"),a(2,"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0446\u0438\u0444\u0440\u0443, \u043E\u0434\u043D\u0443 \u0441\u0442\u0440\u043E\u0447\u043D\u0443\u044E \u0431\u0443\u043A\u0432\u0443, \u043E\u0434\u043D\u0443 \u0437\u0430\u0433\u043B\u0430\u0432\u043D\u0443\u044E \u0431\u0443\u043A\u0432\u0443"),n()())}var R=class r{constructor(e,u){this.router=e;this.authService=u}loginForm;ngOnInit(){this.loginForm=new q({email:new L("",[p.required,p.email]),fakePassword:new L("",[p.required])})}submitLogin(){this.loginForm.valid&&this.authService.login(this.loginForm.value).subscribe(e=>{if(e){let u=Math.random().toString(36).substring(2);this.authService.setToken(u),this.router.navigate(["/dashboard"])}else alert("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043B\u043E\u0433\u0438\u043D \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C")})}static \u0275fac=function(u){return new(u||r)(c(v),c(h))};static \u0275cmp=_({type:r,selectors:[["app-login"]],standalone:!1,decls:11,vars:4,consts:[[3,"ngSubmit","formGroup"],[1,"form__item"],["formControlName","email","type","text","placeholder","\u042D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u044B\u0439 \u0430\u0434\u0440\u0435\u0441","name","email"],["class","error-text",4,"ngIf"],["formControlName","fakePassword","type","fakePassword","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C","name","fakePassword"],["type","submit",1,"login",3,"disabled"],["type","button","routerLink","/auth/register",1,"register"],[1,"error-text"]],template:function(u,t){if(u&1&&(o(0,"form",0),S("ngSubmit",function(){return t.submitLogin()}),o(1,"div",1),d(2,"input",2),g(3,$,3,0,"p",3),n(),o(4,"div",1),d(5,"input",4),g(6,ee,3,0,"p",3),n(),o(7,"button",5),a(8,"\u0412\u0445\u043E\u0434"),n(),o(9,"button",6),a(10,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"),n()()),u&2){let i,s;l("formGroup",t.loginForm),m(3),l("ngIf",((i=t.loginForm.get("email"))==null?null:i.invalid)&&((i=t.loginForm.get("email"))==null?null:i.touched)),m(3),l("ngIf",((s=t.loginForm.get("fakePassword"))==null?null:s.invalid)&&((s=t.loginForm.get("fakePassword"))==null?null:s.touched)),m(),l("disabled",t.loginForm.invalid)}},dependencies:[E,k,P,w,y,I,M,D],styles:["form[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:5px;padding:40px 30px;display:flex;flex-direction:column;gap:15px;width:300px;margin:0 auto}input[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:14px 16px;border-radius:6px;width:250px}input[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue)}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:20px;line-height:48px;padding:0 20px}.login[_ngcontent-%COMP%]{background-color:var(--color-blue);width:100%}.login[_ngcontent-%COMP%]:hover{background-color:#5d75ef}.register[_ngcontent-%COMP%]{background-color:var(--color-green)}.register[_ngcontent-%COMP%]:hover{background-color:#069348}.error-text[_ngcontent-%COMP%]{color:var(--color-red);font-size:14px;font-weight:600}"]})};function te(r,e){r&1&&(o(0,"p",9)(1,"small"),a(2,"\u041A\u0430\u043A \u0412\u0430\u0441 \u0437\u043E\u0432\u0443\u0442?"),n()())}function re(r,e){r&1&&(o(0,"p",9)(1,"small"),a(2,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u044D\u043B. \u0430\u0434\u0440\u0435\u0441"),n()())}function ue(r,e){r&1&&(o(0,"p",9)(1,"small"),a(2,"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443 \u0446\u0438\u0444\u0440\u0443, \u043E\u0434\u043D\u0443 \u0441\u0442\u0440\u043E\u0447\u043D\u0443\u044E \u0431\u0443\u043A\u0432\u0443, \u043E\u0434\u043D\u0443 \u0437\u0430\u0433\u043B\u0430\u0432\u043D\u0443\u044E \u0431\u0443\u043A\u0432\u0443"),n()())}var N=class r{constructor(e,u,t){this.fb=e;this.authService=u;this.router=t}registerForm;ngOnInit(){this.registerForm=this.fb.group({name:["",p.required],email:["",[p.required,p.email]],fakePassword:["",[p.required]]})}submitRegister(){this.registerForm.invalid||this.authService.register(this.registerForm.value).subscribe({next:()=>console.log("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043F\u0440\u043E\u0448\u043B\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),error:e=>{e.message==="\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"?(alert("\u0422\u0430\u043A\u043E\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D!"),this.router.navigate(["/auth/login"])):alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438")}})}static \u0275fac=function(u){return new(u||r)(c(H),c(h),c(v))};static \u0275cmp=_({type:r,selectors:[["app-register"]],standalone:!1,decls:17,vars:5,consts:[[3,"ngSubmit","formGroup"],[1,"form__item"],["formControlName","name","type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0424\u0418\u041E"],["class","error-text",4,"ngIf"],["formControlName","email","type","email","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u042D\u043B. \u0430\u0434\u0440\u0435\u0441"],["formControlName","fakePassword","type","fakePassword","placeholder","\u041F\u0440\u0438\u0434\u0443\u043C\u0430\u0439\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"],["type","submit",1,"register",3,"disabled"],[1,"text"],["routerLink","/auth/login"],[1,"error-text"]],template:function(u,t){if(u&1&&(o(0,"form",0),S("ngSubmit",function(){return t.submitRegister()}),o(1,"h2"),a(2,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C"),n(),o(3,"div",1),d(4,"input",2),g(5,te,3,0,"p",3),n(),o(6,"div",1),d(7,"input",4),g(8,re,3,0,"p",3),n(),o(9,"div",1),d(10,"input",5),g(11,ue,3,0,"p",3),n(),o(12,"button",6),a(13," \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F "),n(),o(14,"p",7)(15,"a",8),a(16,"\u0423 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C \u0443\u0447\u0451\u0442\u043D\u0430\u044F \u0437\u0430\u043F\u0438\u0441\u044C?"),n()()()),u&2){let i,s,f;l("formGroup",t.registerForm),m(5),l("ngIf",((i=t.registerForm.get("name"))==null?null:i.invalid)&&((i=t.registerForm.get("name"))==null?null:i.touched)),m(3),l("ngIf",((s=t.registerForm.get("email"))==null?null:s.invalid)&&((s=t.registerForm.get("email"))==null?null:s.touched)),m(3),l("ngIf",((f=t.registerForm.get("fakePassword"))==null?null:f.invalid)&&((f=t.registerForm.get("fakePassword"))==null?null:f.touched)),m(),l("disabled",t.registerForm.invalid)}},dependencies:[E,k,P,w,y,I,M,D],styles:["form[_ngcontent-%COMP%]{background-color:var(--color-white);border-radius:5px;padding:40px 30px;display:flex;flex-direction:column;gap:15px;width:90%;margin:0 auto}input[_ngcontent-%COMP%]{display:block;border:1px solid var(--color-gray);outline:none;font-size:16px;padding:14px 16px;border-radius:6px;width:100%}input[_ngcontent-%COMP%]:focus{border:1px solid var(--color-blue)}button[_ngcontent-%COMP%]{color:var(--color-white);border-radius:6px;align-self:center;transition:background-color .3s;font-size:20px;line-height:48px;padding:0 20px}.register[_ngcontent-%COMP%]{background-color:var(--color-green)}.register[_ngcontent-%COMP%]:hover{background-color:#069348}.text[_ngcontent-%COMP%]{text-align:center;transition:.3s;font-weight:600}.text[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:var(--color-blue)}.error-text[_ngcontent-%COMP%]{color:var(--color-red);font-size:14px;font-weight:600}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:30px 20px}}"]})};var ie=[{path:"login",component:R},{path:"register",component:N}],B=class r{static \u0275fac=function(u){return new(u||r)};static \u0275mod=F({type:r});static \u0275inj=x({imports:[b.forChild(ie),b]})};var W=class r{static \u0275fac=function(u){return new(u||r)};static \u0275mod=F({type:r});static \u0275inj=x({imports:[G,B,J,b]})};export{h as a,W as b};
